import {
  __export
} from "./chunk-E2SEJZTC.mjs";

// src/index.ts
export * from "@metamask/delegation-utils";

// src/toMetaMaskSmartAccount.ts
import {
  entryPoint07Abi,
  toPackedUserOperation,
  toSmartAccount
} from "viem/account-abstraction";
import {
  getDeleGatorEnvironment,
  Implementation as Implementation3,
  HybridDeleGator as HybridDeleGator6,
  MultiSigDeleGator as MultiSigDeleGator8,
  SIGNABLE_USER_OP_TYPED_DATA,
  SIGNABLE_DELEGATION_TYPED_DATA,
  toDelegationStruct as toDelegationStruct3
} from "@metamask/delegation-utils";

// src/signatory.ts
import {
  concat
} from "viem";
import {
  createDummyWebAuthnSignature,
  encodeDeleGatorSignature,
  Implementation,
  aggregateSignature
} from "@metamask/delegation-utils";
var EOA_STUB_SIGNATURE = "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var resolveSignatory = (config) => {
  const { implementation } = config;
  if (implementation === Implementation.Hybrid) {
    return resolveHybridSignatory(config.signatory);
  } else if (implementation === Implementation.MultiSig) {
    return resolveMultiSigSignatory(
      config.signatory
    );
  } else {
    throw new Error(`Implementation type '${implementation}' not supported`);
  }
};
var resolveSignatoryFromWalletConfig = (config) => {
  return {
    signMessage: config.walletClient.signMessage,
    signTypedData: (typedData) => {
      return config.walletClient.signTypedData(typedData);
    },
    getStubSignature: async () => EOA_STUB_SIGNATURE
  };
};
var resolveSignatoryFromAccountConfig = (config) => {
  return {
    signMessage: config.account.signMessage,
    signTypedData: config.account.signTypedData,
    getStubSignature: async () => EOA_STUB_SIGNATURE
  };
};
var resolveHybridSignatory = (config) => {
  if ("walletClient" in config) {
    return resolveSignatoryFromWalletConfig(config);
  } else if ("account" in config) {
    const { signMessage, signTypedData, getStubSignature } = resolveSignatoryFromAccountConfig(config);
    if (!signMessage) {
      throw new Error("Account does not support signMessage");
    }
    if (!signTypedData) {
      throw new Error("Account does not support signTypedData");
    }
    return {
      signMessage,
      signTypedData,
      getStubSignature
    };
  } else {
    const { keyId, webAuthnAccount } = config;
    if (webAuthnAccount.type !== "webAuthn") {
      throw new Error("Account is not a webAuthn account");
    }
    const encodeSignature = ({ signature, webauthn }) => encodeDeleGatorSignature(
      keyId,
      signature,
      webauthn.clientDataJSON,
      webauthn.authenticatorData
    );
    const signMessage = async (args) => webAuthnAccount.signMessage(args).then(encodeSignature);
    const signTypedData = async (typedDataDefinition) => webAuthnAccount.signTypedData(typedDataDefinition).then(encodeSignature);
    const getStubSignature = async () => createDummyWebAuthnSignature(keyId);
    return {
      signMessage,
      signTypedData,
      getStubSignature
    };
  }
};
var resolveMultiSigSignatory = (config) => {
  const resolvedSignatories = config.map((signatory) => {
    let individualSignMessage;
    let individualSignTypedData;
    let address;
    if ("walletClient" in signatory) {
      const { signMessage: signMessage2, signTypedData: signTypedData2 } = resolveSignatoryFromWalletConfig(signatory);
      individualSignMessage = signMessage2;
      individualSignTypedData = signTypedData2;
      address = signatory.walletClient.account.address;
    } else {
      const { signMessage: signMessage2, signTypedData: signTypedData2 } = resolveSignatoryFromAccountConfig(signatory);
      if (!signMessage2) {
        throw new Error("Account does not support signMessage");
      }
      if (!signTypedData2) {
        throw new Error("Account does not support signTypedData");
      }
      individualSignMessage = signMessage2;
      individualSignTypedData = signTypedData2;
      address = signatory.account.address;
    }
    return {
      address,
      individualSignMessage,
      individualSignTypedData
    };
  });
  const signMessage = async (args) => {
    const addressAndSignatures = resolvedSignatories.map(
      async ({ individualSignMessage, address }) => ({
        signature: await individualSignMessage(args),
        signer: address,
        type: "ECDSA"
      })
    );
    const signatures = await Promise.all(addressAndSignatures);
    return aggregateSignature({
      signatures
    });
  };
  const signTypedData = async (typedDataDefinition) => {
    const addressAndSignatures = resolvedSignatories.map(
      async ({ individualSignTypedData, address }) => ({
        signature: await individualSignTypedData(typedDataDefinition),
        signer: address,
        type: "ECDSA"
      })
    );
    const signatures = await Promise.all(addressAndSignatures);
    return aggregateSignature({
      signatures
    });
  };
  const getStubSignature = async () => concat(resolvedSignatories.map(() => EOA_STUB_SIGNATURE));
  return {
    signMessage,
    signTypedData,
    getStubSignature
  };
};

// src/counterfactualAccountData.ts
import {
  Implementation as Implementation2
} from "@metamask/delegation-utils";
import { getContractAddress, pad } from "viem";

// src/DelegationFramework/HybridDeleGator/encode.ts
var encode_exports = {};
__export(encode_exports, {
  addKey: () => encode,
  initializeHybridDeleGator: () => encode2,
  reinitializeHybridDeleGator: () => encode3,
  removeKey: () => encode4,
  updateSigners: () => encode5
});

// src/DelegationFramework/HybridDeleGator/methods/addKey.ts
import { encodeFunctionData } from "viem";
import { HybridDeleGator } from "@metamask/delegation-abis";
import { simulateContract, writeContract } from "viem/actions";
var simulate = ({
  client,
  hybridDeleGatorAddress,
  p256Owner
}) => {
  return simulateContract(client, {
    address: hybridDeleGatorAddress,
    abi: HybridDeleGator.abi,
    functionName: "addKey",
    args: [p256Owner.keyId, p256Owner.x, p256Owner.y]
  });
};
var encode = ({ p256Owner }) => {
  return encodeFunctionData({
    abi: HybridDeleGator.abi,
    functionName: "addKey",
    args: [p256Owner.keyId, p256Owner.x, p256Owner.y]
  });
};

// src/DelegationFramework/HybridDeleGator/methods/initialize.ts
import { encodeFunctionData as encodeFunctionData2 } from "viem";
import { HybridDeleGator as HybridDeleGator2 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract2, writeContract as writeContract2 } from "viem/actions";
var simulate2 = ({
  client,
  hybridDeleGatorAddress,
  eoaOwner,
  p256Owners
}) => {
  return simulateContract2(client, {
    address: hybridDeleGatorAddress,
    abi: HybridDeleGator2.abi,
    functionName: "initialize",
    args: [
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y)
    ]
  });
};
var encode2 = ({
  eoaOwner,
  p256Owners
}) => {
  return encodeFunctionData2({
    abi: HybridDeleGator2.abi,
    functionName: "initialize",
    args: [
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y)
    ]
  });
};

// src/DelegationFramework/HybridDeleGator/methods/reinitialize.ts
import { encodeFunctionData as encodeFunctionData3 } from "viem";
import { HybridDeleGator as HybridDeleGator3 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract3, writeContract as writeContract3 } from "viem/actions";
var simulate3 = ({
  client,
  hybridDeleGatorAddress,
  version,
  eoaOwner,
  p256Owners,
  removeExistingP256Owners
}) => {
  return simulateContract3(client, {
    address: hybridDeleGatorAddress,
    abi: HybridDeleGator3.abi,
    functionName: "reinitialize",
    args: [
      version,
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y),
      removeExistingP256Owners
    ]
  });
};
var encode3 = ({
  version,
  eoaOwner,
  p256Owners,
  removeExistingP256Owners
}) => {
  return encodeFunctionData3({
    abi: HybridDeleGator3.abi,
    functionName: "reinitialize",
    args: [
      version,
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y),
      removeExistingP256Owners
    ]
  });
};

// src/DelegationFramework/HybridDeleGator/methods/removeKey.ts
import { encodeFunctionData as encodeFunctionData4 } from "viem";
import { HybridDeleGator as HybridDeleGator4 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract4, writeContract as writeContract4 } from "viem/actions";
var simulate4 = ({
  client,
  hybridDeleGatorAddress,
  keyId
}) => {
  return simulateContract4(client, {
    address: hybridDeleGatorAddress,
    abi: HybridDeleGator4.abi,
    functionName: "removeKey",
    args: [keyId]
  });
};
var encode4 = ({ keyId }) => {
  return encodeFunctionData4({
    abi: HybridDeleGator4.abi,
    functionName: "removeKey",
    args: [keyId]
  });
};

// src/DelegationFramework/HybridDeleGator/methods/updateSigners.ts
import { encodeFunctionData as encodeFunctionData5 } from "viem";
import { HybridDeleGator as HybridDeleGator5 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract5, writeContract as writeContract5 } from "viem/actions";
var simulate5 = ({
  client,
  hybridDeleGatorAddress,
  eoaOwner,
  p256Owners
}) => {
  return simulateContract5(client, {
    address: hybridDeleGatorAddress,
    abi: HybridDeleGator5.abi,
    functionName: "updateSigners",
    args: [
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y)
    ]
  });
};
var encode5 = ({
  eoaOwner,
  p256Owners
}) => {
  return encodeFunctionData5({
    abi: HybridDeleGator5.abi,
    functionName: "updateSigners",
    args: [
      eoaOwner,
      p256Owners.map((p256Owner) => p256Owner.keyId),
      p256Owners.map((p256Owner) => p256Owner.x),
      p256Owners.map((p256Owner) => p256Owner.y)
    ]
  });
};

// src/DelegationFramework/MultiSigDeleGator/encode.ts
var encode_exports2 = {};
__export(encode_exports2, {
  addSigner: () => encode6,
  initializeMultiSigDeleGator: () => encode7,
  reinitializeMultiSigDeleGator: () => encode8,
  removeSigner: () => encode9,
  replaceSigner: () => encode10,
  updateMultiSigParameters: () => encode12,
  updateThreshold: () => encode11
});

// src/DelegationFramework/MultiSigDeleGator/methods/addSigner.ts
import { encodeFunctionData as encodeFunctionData6 } from "viem";
import { MultiSigDeleGator } from "@metamask/delegation-abis";
import { simulateContract as simulateContract6, writeContract as writeContract6 } from "viem/actions";
var simulate6 = ({
  client,
  multiSigDeleGatorAddress,
  signer
}) => {
  return simulateContract6(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator.abi,
    functionName: "addSigner",
    args: [signer]
  });
};
var encode6 = ({ signer }) => {
  return encodeFunctionData6({
    abi: MultiSigDeleGator.abi,
    functionName: "addSigner",
    args: [signer]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/initialize.ts
import { encodeFunctionData as encodeFunctionData7 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator2 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract7, writeContract as writeContract7 } from "viem/actions";
var simulate7 = ({
  client,
  multiSigDeleGatorAddress,
  owners,
  threshold
}) => {
  return simulateContract7(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator2.abi,
    functionName: "initialize",
    args: [owners, threshold]
  });
};
var encode7 = ({ owners, threshold }) => {
  return encodeFunctionData7({
    abi: MultiSigDeleGator2.abi,
    functionName: "initialize",
    args: [owners, threshold]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/reinitialize.ts
import { encodeFunctionData as encodeFunctionData8 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator3 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract8, writeContract as writeContract8 } from "viem/actions";
var simulate8 = ({
  client,
  multiSigDeleGatorAddress,
  version,
  owners,
  threshold,
  removeExistingOwners
}) => {
  return simulateContract8(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator3.abi,
    functionName: "reinitialize",
    args: [version, owners, threshold, removeExistingOwners]
  });
};
var encode8 = ({
  version,
  owners,
  threshold,
  removeExistingOwners
}) => {
  return encodeFunctionData8({
    abi: MultiSigDeleGator3.abi,
    functionName: "reinitialize",
    args: [version, owners, threshold, removeExistingOwners]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/removeSigner.ts
import { encodeFunctionData as encodeFunctionData9 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator4 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract9, writeContract as writeContract9 } from "viem/actions";
var simulate9 = ({
  client,
  multiSigDeleGatorAddress,
  signer
}) => {
  return simulateContract9(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator4.abi,
    functionName: "removeSigner",
    args: [signer]
  });
};
var encode9 = ({ signer }) => {
  return encodeFunctionData9({
    abi: MultiSigDeleGator4.abi,
    functionName: "removeSigner",
    args: [signer]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/replaceSigner.ts
import { encodeFunctionData as encodeFunctionData10 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator5 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract10, writeContract as writeContract10 } from "viem/actions";
var simulate10 = ({
  client,
  multiSigDeleGatorAddress,
  oldSigner,
  newSigner
}) => {
  return simulateContract10(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator5.abi,
    functionName: "replaceSigner",
    args: [oldSigner, newSigner]
  });
};
var encode10 = ({
  oldSigner,
  newSigner
}) => {
  return encodeFunctionData10({
    abi: MultiSigDeleGator5.abi,
    functionName: "replaceSigner",
    args: [oldSigner, newSigner]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/updateThreshold.ts
import { encodeFunctionData as encodeFunctionData11 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator6 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract11, writeContract as writeContract11 } from "viem/actions";
var simulate11 = ({
  client,
  multiSigDeleGatorAddress,
  threshold
}) => {
  return simulateContract11(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator6.abi,
    functionName: "updateThreshold",
    args: [threshold]
  });
};
var encode11 = ({ threshold }) => {
  return encodeFunctionData11({
    abi: MultiSigDeleGator6.abi,
    functionName: "updateThreshold",
    args: [threshold]
  });
};

// src/DelegationFramework/MultiSigDeleGator/methods/updateMultiSigParameters.ts
import { encodeFunctionData as encodeFunctionData12 } from "viem";
import { MultiSigDeleGator as MultiSigDeleGator7 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract12, writeContract as writeContract12 } from "viem/actions";
var simulate12 = ({
  client,
  multiSigDeleGatorAddress,
  owners,
  threshold,
  removeExistingOwners
}) => {
  return simulateContract12(client, {
    address: multiSigDeleGatorAddress,
    abi: MultiSigDeleGator7.abi,
    functionName: "updateMultiSigParameters",
    args: [owners, threshold, removeExistingOwners]
  });
};
var encode12 = ({
  owners,
  threshold,
  removeExistingOwners
}) => {
  return encodeFunctionData12({
    abi: MultiSigDeleGator7.abi,
    functionName: "updateMultiSigParameters",
    args: [owners, threshold, removeExistingOwners]
  });
};

// src/DelegationFramework/SimpleFactory/encode.ts
var encode_exports3 = {};
__export(encode_exports3, {
  create2Deploy: () => encode13
});

// src/DelegationFramework/SimpleFactory/methods/create2Deploy.ts
import { encodeFunctionData as encodeFunctionData13 } from "viem";
import { SimpleFactory } from "@metamask/delegation-abis";
import { simulateContract as simulateContract13, writeContract as writeContract13 } from "viem/actions";
var simulate13 = ({
  client,
  factoryAddress,
  creationCode,
  salt
}) => {
  return simulateContract13(client, {
    address: factoryAddress,
    abi: SimpleFactory.abi,
    functionName: "deploy",
    args: [creationCode, salt]
  });
};
var encode13 = (creationCode, salt) => {
  return encodeFunctionData13({
    abi: SimpleFactory.abi,
    functionName: "deploy",
    args: [creationCode, salt]
  });
};
var execute = async ({
  client,
  factoryAddress,
  creationCode,
  salt
}) => {
  const { request } = await simulate13({
    client,
    factoryAddress,
    creationCode,
    salt
  });
  return writeContract13(client, request);
};

// src/DelegationFramework/utils.ts
var utils_exports = {};
__export(utils_exports, {
  encodeProxyCreationCode: () => encodeProxyCreationCode,
  isContractDeployed: () => isContractDeployed,
  isImplementationExpected: () => isImplementationExpected
});
import { encodeDeployData } from "viem";
import { ERC1967Proxy } from "@metamask/delegation-utils";

// src/DelegationFramework/DeleGatorCore/read.ts
var read_exports = {};
__export(read_exports, {
  getDelegationManager: () => read,
  getDeposit: () => read2,
  getEntryPoint: () => read3,
  getNonce: () => read4,
  getProxyImplementation: () => read5,
  getProxyVersion: () => read6,
  isValidSignature: () => read7
});

// src/DelegationFramework/DeleGatorCore/methods/getDelegationManager.ts
import { DeleGatorCore } from "@metamask/delegation-abis";
import { readContract } from "viem/actions";
var read = async ({
  client,
  contractAddress
}) => await readContract(client, {
  address: contractAddress,
  abi: DeleGatorCore.abi,
  functionName: "delegationManager"
});

// src/DelegationFramework/DeleGatorCore/methods/getDeposit.ts
import { DeleGatorCore as DeleGatorCore2 } from "@metamask/delegation-abis";
import { readContract as readContract2 } from "viem/actions";
var read2 = async ({
  client,
  contractAddress
}) => await readContract2(client, {
  address: contractAddress,
  abi: DeleGatorCore2.abi,
  functionName: "getDeposit"
});

// src/DelegationFramework/DeleGatorCore/methods/getEntryPoint.ts
import { DeleGatorCore as DeleGatorCore3 } from "@metamask/delegation-abis";
import { readContract as readContract3 } from "viem/actions";
var read3 = async ({
  client,
  contractAddress
}) => await readContract3(client, {
  address: contractAddress,
  abi: DeleGatorCore3.abi,
  functionName: "entryPoint"
});

// src/DelegationFramework/DeleGatorCore/methods/getNonce.ts
import { DeleGatorCore as DeleGatorCore4 } from "@metamask/delegation-abis";
import { readContract as readContract4 } from "viem/actions";
var read4 = async ({
  client,
  contractAddress,
  key
}) => await readContract4(client, {
  address: contractAddress,
  abi: DeleGatorCore4.abi,
  functionName: "getNonce",
  args: key ? [key] : void 0
});

// src/DelegationFramework/DeleGatorCore/methods/getProxyImplementation.ts
import { DeleGatorCore as DeleGatorCore5 } from "@metamask/delegation-abis";
import { readContract as readContract5 } from "viem/actions";
var read5 = async ({
  client,
  contractAddress
}) => await readContract5(client, {
  address: contractAddress,
  abi: DeleGatorCore5.abi,
  functionName: "getImplementation"
});

// src/DelegationFramework/DeleGatorCore/methods/getProxyVersion.ts
import { DeleGatorCore as DeleGatorCore6 } from "@metamask/delegation-abis";
import { readContract as readContract6 } from "viem/actions";
var read6 = async ({
  client,
  contractAddress
}) => await readContract6(client, {
  address: contractAddress,
  abi: DeleGatorCore6.abi,
  functionName: "getInitializedVersion"
});

// src/DelegationFramework/DeleGatorCore/methods/isValidSignature.ts
import { DeleGatorCore as DeleGatorCore7 } from "@metamask/delegation-abis";
import { encodeFunctionData as encodeFunctionData14 } from "viem";
import { readContract as readContract7 } from "viem/actions";
var read7 = async ({
  client,
  contractAddress,
  hash,
  signature
}) => await readContract7(client, {
  address: contractAddress,
  abi: DeleGatorCore7.abi,
  functionName: "isValidSignature",
  args: [hash, signature]
});
var encode14 = ({
  hash,
  signature
}) => {
  return encodeFunctionData14({
    abi: DeleGatorCore7.abi,
    functionName: "isValidSignature",
    args: [hash, signature]
  });
};

// src/DelegationFramework/utils.ts
import { getCode } from "viem/actions";
async function isContractDeployed({
  client,
  contractAddress
}) {
  const code = await getCode(client, {
    address: contractAddress
  });
  return !!code && code !== "0x";
}
async function isImplementationExpected({
  client,
  contractAddress,
  expectedImplementationAddress
}) {
  if (!await isContractDeployed({ client, contractAddress }))
    return false;
  const implementationAddress = await read5({
    client,
    contractAddress
  });
  return implementationAddress === expectedImplementationAddress;
}
var encodeProxyCreationCode = ({
  implementationAddress,
  initcode
}) => encodeDeployData({
  abi: ERC1967Proxy.abi,
  args: [implementationAddress, initcode],
  bytecode: ERC1967Proxy.bytecode
});

// src/counterfactualAccountData.ts
var getCounterfactualAccountData = async ({
  factory,
  implementations,
  implementation,
  deployParams,
  deploySalt
}) => {
  let implementationAddress, initcode;
  switch (implementation) {
    case Implementation2.Hybrid:
      const [owner, keyIds, xValues, yValues] = deployParams;
      implementationAddress = implementations.HybridDeleGatorImpl;
      const p256Owners = keyIds.map((keyId, index) => ({
        keyId,
        x: xValues[index],
        y: yValues[index]
      }));
      initcode = encode2({ eoaOwner: owner, p256Owners });
      break;
    case Implementation2.MultiSig:
      const [owners, threshold] = deployParams;
      implementationAddress = implementations.MultiSigDeleGatorImpl;
      initcode = encode7({ owners, threshold });
      break;
    default:
      throw new Error(`Implementation type '${implementation}' not supported`);
  }
  const salt = pad(deploySalt, { dir: "left", size: 32 });
  const proxyCreationCode = encodeProxyCreationCode({
    implementationAddress,
    initcode
  });
  const address = getContractAddress({
    bytecode: proxyCreationCode,
    from: factory,
    opcode: "CREATE2",
    salt
  });
  const factoryData = encode13(proxyCreationCode, salt);
  return {
    factoryData,
    address
  };
};

// src/encodeCalls.ts
import { encodeFunctionData as encodeFunctionData20 } from "viem";
import {
  BATCH_DEFAULT_MODE,
  createExecution,
  SINGLE_DEFAULT_MODE,
  encodeExecutionCalldatas,
  DelegationManager
} from "@metamask/delegation-utils";

// src/DelegationFramework/DeleGatorCore/encode.ts
var encode_exports4 = {};
__export(encode_exports4, {
  disableDelegation: () => encode15,
  enableDelegation: () => encode16,
  execute: () => encode17,
  executeWithMode: () => encode18,
  isValidSignature: () => encode14,
  upgradeToAndCall: () => encode19
});

// src/DelegationFramework/DeleGatorCore/methods/disableDelegation.ts
import { encodeFunctionData as encodeFunctionData15 } from "viem";
import { DeleGatorCore as DeleGatorCore8 } from "@metamask/delegation-abis";
import { toDelegationStruct } from "@metamask/delegation-utils";
import { simulateContract as simulateContract14, writeContract as writeContract14 } from "viem/actions";
var simulate14 = ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const abi = DeleGatorCore8.abi;
  const delegationStruct = toDelegationStruct(delegation);
  return simulateContract14(client, {
    address: delegationManagerAddress,
    abi,
    functionName: "disableDelegation",
    args: [delegationStruct]
  });
};
var execute2 = async ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const { request } = await simulate14({
    client,
    delegationManagerAddress,
    delegation
  });
  return writeContract14(client, request);
};
var encode15 = ({ delegation }) => {
  const delegationStruct = toDelegationStruct(delegation);
  return encodeFunctionData15({
    abi: DeleGatorCore8.abi,
    functionName: "disableDelegation",
    args: [delegationStruct]
  });
};

// src/DelegationFramework/DeleGatorCore/methods/enableDelegation.ts
import { encodeFunctionData as encodeFunctionData16 } from "viem";
import { DeleGatorCore as DeleGatorCore9 } from "@metamask/delegation-abis";
import { toDelegationStruct as toDelegationStruct2 } from "@metamask/delegation-utils";
import { simulateContract as simulateContract15, writeContract as writeContract15 } from "viem/actions";
var simulate15 = ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const abi = DeleGatorCore9.abi;
  const delegationStruct = toDelegationStruct2(delegation);
  return simulateContract15(client, {
    address: delegationManagerAddress,
    abi,
    functionName: "enableDelegation",
    args: [delegationStruct]
  });
};
var execute3 = async ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const { request } = await simulate15({
    client,
    delegationManagerAddress,
    delegation
  });
  return writeContract15(client, request);
};
var encode16 = ({ delegation }) => {
  const delegationStruct = toDelegationStruct2(delegation);
  return encodeFunctionData16({
    abi: DeleGatorCore9.abi,
    functionName: "enableDelegation",
    args: [delegationStruct]
  });
};

// src/DelegationFramework/DeleGatorCore/methods/execute.ts
import { encodeFunctionData as encodeFunctionData17 } from "viem";
import { DeleGatorCore as DeleGatorCore10 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract16, writeContract as writeContract16 } from "viem/actions";
var simulate16 = ({
  client,
  contractAddress,
  execution
}) => {
  return simulateContract16(client, {
    address: contractAddress,
    abi: DeleGatorCore10.abi,
    functionName: "execute",
    args: [execution]
  });
};
var execute4 = async ({
  client,
  contractAddress,
  execution
}) => {
  const { request } = await simulate16({
    client,
    contractAddress,
    execution
  });
  return writeContract16(client, request);
};
var encode17 = ({ execution }) => {
  return encodeFunctionData17({
    abi: DeleGatorCore10.abi,
    functionName: "execute",
    args: [execution]
  });
};

// src/DelegationFramework/DeleGatorCore/methods/executeWithMode.ts
import { encodeFunctionData as encodeFunctionData18 } from "viem";
import { DeleGatorCore as DeleGatorCore11 } from "@metamask/delegation-abis";
import {
  encodeExecutionCalldata
} from "@metamask/delegation-utils";
import { simulateContract as simulateContract17, writeContract as writeContract17 } from "viem/actions";
var simulate17 = ({
  client,
  contractAddress,
  mode,
  executions
}) => {
  return simulateContract17(client, {
    address: contractAddress,
    abi: DeleGatorCore11.abi,
    functionName: "execute",
    args: [mode, encodeExecutionCalldata(executions)]
  });
};
var execute5 = async ({
  client,
  contractAddress,
  mode,
  executions
}) => {
  const { request } = await simulate17({
    client,
    contractAddress,
    mode,
    executions
  });
  return writeContract17(client, request);
};
var encode18 = ({
  mode,
  executions
}) => {
  return encodeFunctionData18({
    abi: DeleGatorCore11.abi,
    functionName: "execute",
    args: [mode, encodeExecutionCalldata(executions)]
  });
};

// src/DelegationFramework/DeleGatorCore/methods/upgradeToAndCall.ts
import { encodeFunctionData as encodeFunctionData19 } from "viem";
import { DeleGatorCore as DeleGatorCore12 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract18, writeContract as writeContract18 } from "viem/actions";
var simulate18 = ({
  client,
  contractAddress,
  implementation,
  data
}) => {
  return simulateContract18(client, {
    address: contractAddress,
    abi: DeleGatorCore12.abi,
    functionName: "upgradeToAndCall",
    args: [implementation, data]
  });
};
var execute6 = async ({
  client,
  contractAddress,
  implementation,
  data
}) => {
  const { request } = await simulate18({
    client,
    contractAddress,
    implementation,
    data
  });
  return writeContract18(client, request);
};
var encode19 = ({
  implementation,
  data
}) => {
  return encodeFunctionData19({
    abi: DeleGatorCore12.abi,
    functionName: "upgradeToAndCall",
    args: [implementation, data]
  });
};

// src/encodeCalls.ts
var encodeCallsForCaller = async (caller, calls) => {
  if (calls.length === 1) {
    const call = calls[0];
    if (call.to === caller && !isDelegatedCall(call)) {
      return call.data || "0x";
    }
  }
  return encodeCalls(calls);
};
var encodeCalls = (calls) => {
  if (calls.length === 1 && !isDelegatedCall(calls[0])) {
    const { to, value, data } = calls[0];
    const execution = createExecution(to, value, data);
    return encode17({ execution });
  }
  const executions = calls.map((call) => {
    if (isDelegatedCall(call)) {
      const { permissionsContext, delegationManager } = call;
      const redeemCalldata = encodeFunctionData20({
        abi: DelegationManager.abi,
        functionName: "redeemDelegations",
        args: [
          [permissionsContext],
          [SINGLE_DEFAULT_MODE],
          encodeExecutionCalldatas([
            [createExecution(call.to, call.value, call.data)]
          ])
        ]
      });
      return createExecution(delegationManager, 0n, redeemCalldata);
    } else {
      const { to, value, data } = call;
      return createExecution(to, value, data);
    }
  });
  const mode = calls.length === 1 ? SINGLE_DEFAULT_MODE : BATCH_DEFAULT_MODE;
  return encode18({ mode, executions });
};
var isDelegatedCall = (call) => {
  return "permissionsContext" in call && "delegationManager" in call;
};

// src/DelegationFramework/EntryPoint/read.ts
var read_exports2 = {};
__export(read_exports2, {
  entryPointGetNonce: () => read8
});

// src/DelegationFramework/EntryPoint/methods/getNonce.ts
import { EntryPoint } from "@metamask/delegation-abis";
import { readContract as readContract8 } from "viem/actions";
var read8 = async ({
  client,
  entryPoint,
  contractAddress,
  key
}) => await readContract8(client, {
  address: entryPoint,
  abi: EntryPoint.abi,
  functionName: "getNonce",
  args: [contractAddress, key]
});

// src/toMetaMaskSmartAccount.ts
var ENTRYPOINT_VERSION = "0.7";
async function toMetaMaskSmartAccount(params) {
  const {
    client,
    client: { chain },
    implementation
  } = params;
  if (!chain) {
    throw new Error("Chain not specified");
  }
  const signatory = resolveSignatory({
    implementation,
    signatory: params.signatory
  });
  const environment = params.environment ?? getDeleGatorEnvironment(chain.id);
  const implementationContractName = implementation === Implementation3.Hybrid ? "HybridDeleGator" : "MultiSigDeleGator";
  let address, factoryData;
  if (params.address) {
    factoryData = void 0;
    address = params.address;
  } else {
    const accountData = await getCounterfactualAccountData({
      factory: environment.SimpleFactory,
      implementations: environment.implementations,
      implementation,
      deployParams: params.deployParams,
      deploySalt: params.deploySalt
    });
    address = accountData.address;
    factoryData = accountData.factoryData;
  }
  const entryPoint = {
    abi: entryPoint07Abi,
    address: environment.EntryPoint,
    version: ENTRYPOINT_VERSION
  };
  const getFactoryArgs = async () => {
    if (factoryData === void 0) {
      throw new Error(
        "Deploy params were not provided, so factory args cannot be inferred"
      );
    }
    return {
      factoryData,
      factory: environment.SimpleFactory
    };
  };
  const signDelegation = (params2) => {
    const { delegation, chainId } = params2;
    const delegationStruct = toDelegationStruct3({
      ...delegation,
      signature: "0x"
    });
    const signature = signatory.signTypedData({
      domain: {
        chainId: chainId || chain.id,
        name: "DelegationManager",
        version: "1",
        verifyingContract: environment.DelegationManager
      },
      types: SIGNABLE_DELEGATION_TYPED_DATA,
      primaryType: "Delegation",
      message: delegationStruct
    });
    return signature;
  };
  const signUserOperation = async (params2) => {
    const { chainId } = params2;
    const packedUserOp = toPackedUserOperation({
      sender: address,
      ...params2,
      signature: "0x"
    });
    const signature = await signatory.signTypedData({
      domain: {
        chainId: chainId || chain.id,
        name: implementationContractName,
        version: "1",
        verifyingContract: address
      },
      types: SIGNABLE_USER_OP_TYPED_DATA,
      primaryType: "PackedUserOperation",
      message: { ...packedUserOp, entryPoint: entryPoint.address }
    });
    return signature;
  };
  const delegatorAbi = implementation === Implementation3.Hybrid ? HybridDeleGator6.abi : MultiSigDeleGator8.abi;
  const getAddress = async () => address;
  const getNonce = () => read8({
    client,
    entryPoint: environment.EntryPoint,
    contractAddress: address,
    key: 0n
  });
  const encodeCalls2 = async (calls) => encodeCallsForCaller(address, calls);
  const smartAccount = await toSmartAccount({
    abi: delegatorAbi,
    client,
    entryPoint,
    environment,
    getAddress,
    getFactoryArgs,
    encodeCalls: encodeCalls2,
    getNonce,
    signUserOperation,
    signDelegation,
    ...signatory
  });
  return smartAccount;
}

// src/DelegationFramework/DelegationManager/encode.ts
var encode_exports5 = {};
__export(encode_exports5, {
  disableDelegation: () => encode20,
  enableDelegation: () => encode21,
  redeemDelegations: () => encode22
});

// src/DelegationFramework/DelegationManager/methods/disableDelegation.ts
import { encodeFunctionData as encodeFunctionData21 } from "viem";
import { DelegationManager as DelegationManager2 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract19, writeContract as writeContract19 } from "viem/actions";
import { toDelegationStruct as toDelegationStruct4 } from "@metamask/delegation-utils";
var simulate19 = ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const abi = DelegationManager2.abi;
  const delegationStruct = toDelegationStruct4(delegation);
  return simulateContract19(client, {
    address: delegationManagerAddress,
    abi,
    functionName: "disableDelegation",
    args: [delegationStruct]
  });
};
var execute7 = async ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const { request } = await simulate19({
    client,
    delegationManagerAddress,
    delegation
  });
  return writeContract19(client, request);
};
var encode20 = ({ delegation }) => {
  const delegationStruct = toDelegationStruct4(delegation);
  return encodeFunctionData21({
    abi: DelegationManager2.abi,
    functionName: "disableDelegation",
    args: [delegationStruct]
  });
};

// src/DelegationFramework/DelegationManager/methods/enableDelegation.ts
import { encodeFunctionData as encodeFunctionData22 } from "viem";
import { DelegationManager as DelegationManager3 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract20, writeContract as writeContract20 } from "viem/actions";
import { toDelegationStruct as toDelegationStruct5 } from "@metamask/delegation-utils";
var simulate20 = ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const abi = DelegationManager3.abi;
  const delegationStruct = toDelegationStruct5(delegation);
  return simulateContract20(client, {
    address: delegationManagerAddress,
    abi,
    functionName: "enableDelegation",
    args: [delegationStruct]
  });
};
var execute8 = async ({
  client,
  delegationManagerAddress,
  delegation
}) => {
  const { request } = await simulate20({
    client,
    delegationManagerAddress,
    delegation
  });
  return writeContract20(client, request);
};
var encode21 = ({ delegation }) => {
  const delegationStruct = toDelegationStruct5(delegation);
  return encodeFunctionData22({
    abi: DelegationManager3.abi,
    functionName: "enableDelegation",
    args: [delegationStruct]
  });
};

// src/DelegationFramework/DelegationManager/methods/redeemDelegations.ts
import { encodeFunctionData as encodeFunctionData23 } from "viem";
import { DelegationManager as DelegationManager4 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract21, writeContract as writeContract21 } from "viem/actions";
import {
  encodePermissionContexts,
  encodeExecutionCalldatas as encodeExecutionCalldatas2
} from "@metamask/delegation-utils";
var simulate21 = ({
  client,
  delegationManagerAddress,
  delegations,
  modes,
  executions
}) => {
  const abi = DelegationManager4.abi;
  return simulateContract21(client, {
    address: delegationManagerAddress,
    abi,
    functionName: "redeemDelegations",
    args: [
      encodePermissionContexts(delegations),
      modes,
      encodeExecutionCalldatas2(executions)
    ]
  });
};
var execute9 = async ({
  client,
  delegationManagerAddress,
  delegations,
  modes,
  executions
}) => {
  const { request } = await simulate21({
    client,
    delegationManagerAddress,
    delegations,
    modes,
    executions
  });
  return writeContract21(client, request);
};
var encode22 = ({
  delegations,
  modes,
  executions
}) => {
  return encodeFunctionData23({
    abi: DelegationManager4.abi,
    functionName: "redeemDelegations",
    args: [
      encodePermissionContexts(delegations),
      modes,
      encodeExecutionCalldatas2(executions)
    ]
  });
};

// src/DelegationFramework/DelegationManager/execute.ts
var execute_exports = {};
__export(execute_exports, {
  disableDelegation: () => execute7,
  enableDelegation: () => execute8,
  redeemDelegations: () => execute9
});

// src/DelegationFramework/DelegationManager/read.ts
var read_exports3 = {};
__export(read_exports3, {
  getAnyDelegate: () => read9,
  getRootAuthority: () => read10
});

// src/DelegationFramework/DelegationManager/methods/getAnyDelegate.ts
import { DelegationManager as DelegationManager5 } from "@metamask/delegation-abis";
import { readContract as readContract9 } from "viem/actions";
var read9 = async ({
  client,
  contractAddress
}) => await readContract9(client, {
  address: contractAddress,
  abi: DelegationManager5.abi,
  functionName: "ANY_DELEGATE"
});

// src/DelegationFramework/DelegationManager/methods/getRootAuthority.ts
import { DelegationManager as DelegationManager6 } from "@metamask/delegation-abis";
import { readContract as readContract10 } from "viem/actions";
var read10 = async ({
  client,
  contractAddress
}) => await readContract10(client, {
  address: contractAddress,
  abi: DelegationManager6.abi,
  functionName: "ROOT_AUTHORITY"
});

// src/DelegationFramework/DelegationManager/simulate.ts
var simulate_exports = {};
__export(simulate_exports, {
  disableDelegation: () => simulate19,
  enableDelegation: () => simulate20,
  redeemDelegations: () => simulate21
});

// src/DelegationFramework/DelegationManager/constants.ts
var constants_exports = {};
__export(constants_exports, {
  ANY_DELEGATE: () => ANY_DELEGATE,
  DOMAIN_VERSION: () => DOMAIN_VERSION,
  NAME: () => NAME,
  ROOT_AUTHORITY: () => ROOT_AUTHORITY,
  VERSION: () => VERSION
});
var NAME = "DelegationManager";
var VERSION = "1.3.0";
var DOMAIN_VERSION = "1";
var ROOT_AUTHORITY = "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
var ANY_DELEGATE = "0x0000000000000000000000000000000000000a11";

// src/DelegationFramework/DeleGatorCore/execute.ts
var execute_exports2 = {};
__export(execute_exports2, {
  disableDelegation: () => execute2,
  enableDelegation: () => execute3,
  execute: () => execute4,
  executeWithMode: () => execute5,
  upgradeToAndCall: () => execute6
});

// src/DelegationFramework/DeleGatorCore/simulate.ts
var simulate_exports2 = {};
__export(simulate_exports2, {
  disableDelegation: () => simulate14,
  enableDelegation: () => simulate15,
  execute: () => simulate16,
  executeWithMode: () => simulate17,
  upgradeToAndCall: () => simulate18
});

// src/DelegationFramework/EIP712/read.ts
var read_exports4 = {};
__export(read_exports4, {
  getContractName: () => read11,
  getContractVersion: () => read12,
  getDomainVersion: () => read13
});

// src/DelegationFramework/EIP712/methods/getContractName.ts
import { readContract as readContract11 } from "viem/actions";
var read11 = async ({
  client,
  contractAddress
}) => await readContract11(client, {
  address: contractAddress,
  abi: [
    {
      type: "function",
      name: "NAME",
      inputs: [],
      outputs: [
        {
          name: "",
          type: "string",
          internalType: "string"
        }
      ],
      stateMutability: "view"
    }
  ],
  functionName: "NAME"
});

// src/DelegationFramework/EIP712/methods/getContractVersion.ts
import { readContract as readContract12 } from "viem/actions";
var read12 = async ({
  client,
  contractAddress
}) => await readContract12(client, {
  address: contractAddress,
  abi: [
    {
      type: "function",
      name: "VERSION",
      inputs: [],
      outputs: [
        {
          name: "",
          type: "string",
          internalType: "string"
        }
      ],
      stateMutability: "view"
    }
  ],
  functionName: "VERSION"
});

// src/DelegationFramework/EIP712/methods/getDomainVersion.ts
import { readContract as readContract13 } from "viem/actions";
var read13 = async ({
  client,
  contractAddress
}) => await readContract13(client, {
  address: contractAddress,
  abi: [
    {
      type: "function",
      name: "DOMAIN_VERSION",
      inputs: [],
      outputs: [
        {
          name: "",
          type: "string",
          internalType: "string"
        }
      ],
      stateMutability: "view"
    }
  ],
  functionName: "DOMAIN_VERSION"
});

// src/DelegationFramework/HybridDeleGator/read.ts
var read_exports5 = {};
__export(read_exports5, {
  getKey: () => read14,
  getKeyIdHashes: () => read15,
  getKeyIdHashesCount: () => read16
});

// src/DelegationFramework/HybridDeleGator/methods/getKey.ts
import { HybridDeleGator as HybridDeleGator7 } from "@metamask/delegation-abis";
import { readContract as readContract14 } from "viem/actions";
var read14 = async ({
  client,
  hybridDeleGatorAddress,
  keyId
}) => await readContract14(client, {
  address: hybridDeleGatorAddress,
  abi: HybridDeleGator7.abi,
  functionName: "getKey",
  args: [keyId]
});

// src/DelegationFramework/HybridDeleGator/methods/getKeyIdHashes.ts
import { HybridDeleGator as HybridDeleGator8 } from "@metamask/delegation-abis";
import { readContract as readContract15 } from "viem/actions";
var read15 = async ({
  client,
  hybridDeleGatorAddress
}) => await readContract15(client, {
  address: hybridDeleGatorAddress,
  abi: HybridDeleGator8.abi,
  functionName: "getKeyIdHashes"
});

// src/DelegationFramework/HybridDeleGator/methods/getKeyIdHashesCount.ts
import { HybridDeleGator as HybridDeleGator9 } from "@metamask/delegation-abis";
import { readContract as readContract16 } from "viem/actions";
var read16 = async ({
  client,
  hybridDeleGatorAddress
}) => await readContract16(client, {
  address: hybridDeleGatorAddress,
  abi: HybridDeleGator9.abi,
  functionName: "getKeyIdHashesCount"
});

// src/DelegationFramework/HybridDeleGator/simulate.ts
var simulate_exports3 = {};
__export(simulate_exports3, {
  addKey: () => simulate,
  initializeHybridDeleGator: () => simulate2,
  reinitializeHybridDeleGator: () => simulate3,
  removeKey: () => simulate4,
  updateSigners: () => simulate5
});

// src/DelegationFramework/HybridDeleGator/constants.ts
var constants_exports2 = {};
__export(constants_exports2, {
  ANY_DELEGATE: () => ANY_DELEGATE2,
  DOMAIN_VERSION: () => DOMAIN_VERSION2,
  NAME: () => NAME2,
  ROOT_AUTHORITY: () => ROOT_AUTHORITY2,
  VERSION: () => VERSION2
});
var NAME2 = "HybridDeleGator";
var VERSION2 = "1.3.0";
var DOMAIN_VERSION2 = "1";
var ROOT_AUTHORITY2 = "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
var ANY_DELEGATE2 = "0x0000000000000000000000000000000000000a11";

// src/DelegationFramework/MultiSigDeleGator/read.ts
var read_exports6 = {};
__export(read_exports6, {
  getMaxNumberOfSigners: () => read21,
  getSigners: () => read17,
  getSignersCount: () => read18,
  getThreshold: () => read19,
  isSigner: () => read20
});

// src/DelegationFramework/MultiSigDeleGator/methods/getSigners.ts
import { MultiSigDeleGator as MultiSigDeleGator9 } from "@metamask/delegation-abis";
import { readContract as readContract17 } from "viem/actions";
var read17 = async ({
  client,
  multiSigDeleGatorAddress
}) => await readContract17(client, {
  address: multiSigDeleGatorAddress,
  abi: MultiSigDeleGator9.abi,
  functionName: "getSigners"
});

// src/DelegationFramework/MultiSigDeleGator/methods/getSignersCount.ts
import { MultiSigDeleGator as MultiSigDeleGator10 } from "@metamask/delegation-abis";
import { readContract as readContract18 } from "viem/actions";
var read18 = async ({
  client,
  multiSigDeleGatorAddress
}) => await readContract18(client, {
  address: multiSigDeleGatorAddress,
  abi: MultiSigDeleGator10.abi,
  functionName: "getSignersCount"
});

// src/DelegationFramework/MultiSigDeleGator/methods/getThreshold.ts
import { MultiSigDeleGator as MultiSigDeleGator11 } from "@metamask/delegation-abis";
import { readContract as readContract19 } from "viem/actions";
var read19 = async ({
  client,
  multiSigDeleGatorAddress
}) => await readContract19(client, {
  address: multiSigDeleGatorAddress,
  abi: MultiSigDeleGator11.abi,
  functionName: "getThreshold"
});

// src/DelegationFramework/MultiSigDeleGator/methods/isSigner.ts
import { MultiSigDeleGator as MultiSigDeleGator12 } from "@metamask/delegation-abis";
import { readContract as readContract20 } from "viem/actions";
var read20 = async ({
  client,
  multiSigDeleGatorAddress,
  signer
}) => await readContract20(client, {
  address: multiSigDeleGatorAddress,
  abi: MultiSigDeleGator12.abi,
  functionName: "isSigner",
  args: [signer]
});

// src/DelegationFramework/MultiSigDeleGator/methods/getMaxNumberOfSigners.ts
import { MultiSigDeleGator as MultiSigDeleGator13 } from "@metamask/delegation-abis";
import { readContract as readContract21 } from "viem/actions";
var read21 = async ({
  client,
  multiSigDeleGatorAddress
}) => await readContract21(client, {
  address: multiSigDeleGatorAddress,
  abi: MultiSigDeleGator13.abi,
  functionName: "MAX_NUMBER_OF_SIGNERS"
});

// src/DelegationFramework/MultiSigDeleGator/simulate.ts
var simulate_exports4 = {};
__export(simulate_exports4, {
  addSigner: () => simulate6,
  initializeMultiSigDeleGator: () => simulate7,
  reinitializeMultiSigDeleGator: () => simulate8,
  removeSigner: () => simulate9,
  replaceSigner: () => simulate10,
  updateMultiSigParameters: () => simulate12,
  updateThreshold: () => simulate11
});

// src/DelegationFramework/MultiSigDeleGator/constants.ts
var constants_exports3 = {};
__export(constants_exports3, {
  MAX_NUMBER_OF_SIGNERS: () => MAX_NUMBER_OF_SIGNERS
});
var MAX_NUMBER_OF_SIGNERS = 30;

// src/DelegationFramework/Ownable2Step/read.ts
var read_exports7 = {};
__export(read_exports7, {
  getOwner: () => read23,
  getPendingOwner: () => read22
});

// src/DelegationFramework/Ownable2Step/methods/getPendingOwner.ts
import { Ownable2Step } from "@metamask/delegation-abis";
import { readContract as readContract22 } from "viem/actions";
var read22 = async ({
  client,
  contractAddress
}) => await readContract22(client, {
  address: contractAddress,
  abi: Ownable2Step.abi,
  functionName: "pendingOwner"
});

// src/DelegationFramework/Ownable2Step/methods/getOwner.ts
import { Ownable2Step as Ownable2Step2 } from "@metamask/delegation-abis";
import { readContract as readContract23 } from "viem/actions";
var read23 = async ({
  client,
  contractAddress
}) => await readContract23(client, {
  address: contractAddress,
  abi: Ownable2Step2.abi,
  functionName: "owner"
});

// src/DelegationFramework/Ownable2Step/execute.ts
var execute_exports3 = {};
__export(execute_exports3, {
  acceptOwnership: () => execute12,
  renounceOwnership: () => execute11,
  transferOwnership: () => execute10
});

// src/DelegationFramework/Ownable2Step/methods/transferOwnership.ts
import { encodeFunctionData as encodeFunctionData24 } from "viem";
import { Ownable2Step as Ownable2Step3 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract22, writeContract as writeContract22 } from "viem/actions";
var simulate22 = ({
  client,
  contractAddress,
  account
}) => {
  return simulateContract22(client, {
    address: contractAddress,
    abi: Ownable2Step3.abi,
    functionName: "transferOwnership",
    args: [account]
  });
};
var execute10 = async ({
  client,
  contractAddress,
  account
}) => {
  const { request } = await simulate22({
    client,
    contractAddress,
    account
  });
  return writeContract22(client, request);
};
var encode23 = (account) => {
  return encodeFunctionData24({
    abi: Ownable2Step3.abi,
    functionName: "transferOwnership",
    args: [account]
  });
};

// src/DelegationFramework/Ownable2Step/methods/renounceOwnership.ts
import { encodeFunctionData as encodeFunctionData25 } from "viem";
import { Ownable2Step as Ownable2Step4 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract23, writeContract as writeContract23 } from "viem/actions";
var simulate23 = ({
  client,
  contractAddress
}) => {
  return simulateContract23(client, {
    address: contractAddress,
    abi: Ownable2Step4.abi,
    functionName: "renounceOwnership"
  });
};
var execute11 = async ({
  client,
  contractAddress
}) => {
  const { request } = await simulate23({
    client,
    contractAddress
  });
  return writeContract23(client, request);
};
var encode24 = () => {
  return encodeFunctionData25({
    abi: Ownable2Step4.abi,
    functionName: "renounceOwnership"
  });
};

// src/DelegationFramework/Ownable2Step/methods/acceptOwnership.ts
import { encodeFunctionData as encodeFunctionData26 } from "viem";
import { Ownable2Step as Ownable2Step5 } from "@metamask/delegation-abis";
import { simulateContract as simulateContract24, writeContract as writeContract24 } from "viem/actions";
var simulate24 = ({
  client,
  contractAddress
}) => {
  return simulateContract24(client, {
    address: contractAddress,
    abi: Ownable2Step5.abi,
    functionName: "acceptOwnership"
  });
};
var execute12 = async ({
  client,
  contractAddress
}) => {
  const { request } = await simulate24({
    client,
    contractAddress
  });
  return writeContract24(client, request);
};
var encode25 = () => {
  return encodeFunctionData26({
    abi: Ownable2Step5.abi,
    functionName: "acceptOwnership"
  });
};

// src/DelegationFramework/Ownable2Step/encode.ts
var encode_exports6 = {};
__export(encode_exports6, {
  acceptOwnership: () => encode25,
  renounceOwnership: () => encode24,
  transferOwnership: () => encode23
});

// src/DelegationFramework/Ownable2Step/simulate.ts
var simulate_exports5 = {};
__export(simulate_exports5, {
  acceptOwnership: () => simulate24,
  renounceOwnership: () => simulate23,
  transferOwnership: () => simulate22
});

// src/DelegationFramework/Pausable/read.ts
var read_exports8 = {};
__export(read_exports8, {
  isPaused: () => read24
});

// src/DelegationFramework/Pausable/methods/isPaused.ts
import { Pausable } from "@metamask/delegation-abis";
import { readContract as readContract24 } from "viem/actions";
var read24 = async ({
  client,
  contractAddress
}) => await readContract24(client, {
  address: contractAddress,
  abi: Pausable.abi,
  functionName: "paused"
});

// src/DelegationFramework/Pausable/execute.ts
var execute_exports4 = {};
__export(execute_exports4, {
  pause: () => execute13,
  unpause: () => execute14
});

// src/DelegationFramework/Pausable/methods/pause.ts
import { encodeFunctionData as encodeFunctionData27 } from "viem";
import { simulateContract as simulateContract25, writeContract as writeContract25 } from "viem/actions";
var PauseAbi = [
  {
    type: "function",
    name: "pause",
    inputs: [],
    outputs: [],
    stateMutability: "nonpayable"
  }
];
var simulate25 = ({
  client,
  contractAddress
}) => {
  return simulateContract25(client, {
    address: contractAddress,
    abi: PauseAbi,
    functionName: "pause"
  });
};
var execute13 = async ({
  client,
  contractAddress
}) => {
  const { request } = await simulate25({
    client,
    contractAddress
  });
  return writeContract25(client, request);
};
var encode26 = () => {
  return encodeFunctionData27({
    abi: PauseAbi,
    functionName: "pause"
  });
};

// src/DelegationFramework/Pausable/methods/unpause.ts
import { encodeFunctionData as encodeFunctionData28 } from "viem";
import { simulateContract as simulateContract26, writeContract as writeContract26 } from "viem/actions";
var UnpauseAbi = [
  {
    type: "function",
    name: "unpause",
    inputs: [],
    outputs: [],
    stateMutability: "nonpayable"
  }
];
var simulate26 = ({
  client,
  contractAddress
}) => {
  return simulateContract26(client, {
    address: contractAddress,
    abi: UnpauseAbi,
    functionName: "unpause"
  });
};
var execute14 = async ({
  client,
  contractAddress
}) => {
  const { request } = await simulate26({
    client,
    contractAddress
  });
  return writeContract26(client, request);
};
var encode27 = () => {
  return encodeFunctionData28({
    abi: UnpauseAbi,
    functionName: "unpause"
  });
};

// src/DelegationFramework/Pausable/encode.ts
var encode_exports7 = {};
__export(encode_exports7, {
  pause: () => encode26,
  unpause: () => encode27
});

// src/DelegationFramework/Pausable/simulate.ts
var simulate_exports6 = {};
__export(simulate_exports6, {
  pause: () => simulate25,
  unpause: () => simulate26
});

// src/DelegationFramework/SimpleFactory/read.ts
var read_exports9 = {};
__export(read_exports9, {
  getCreate2Address: () => read25
});

// src/DelegationFramework/SimpleFactory/methods/getCreate2Address.ts
import { SimpleFactory as SimpleFactory2 } from "@metamask/delegation-abis";
import { readContract as readContract25 } from "viem/actions";
var read25 = (client, factoryAddress, creationCode, salt) => {
  return readContract25(client, {
    address: factoryAddress,
    abi: SimpleFactory2.abi,
    functionName: "computeAddress",
    args: [creationCode, salt]
  });
};

// src/DelegationFramework/SimpleFactory/simulate.ts
var simulate_exports7 = {};
__export(simulate_exports7, {
  create2Deploy: () => simulate13
});

// src/DelegationFramework/SimpleFactory/execute.ts
var execute_exports5 = {};
__export(execute_exports5, {
  create2Deploy: () => execute
});

// src/DelegationFramework/index.ts
var encode28 = {
  ...encode_exports,
  ...encode_exports2,
  ...encode_exports5,
  ...encode_exports4,
  ...encode_exports6,
  ...encode_exports7,
  ...encode_exports3
};
var execute15 = {
  ...execute_exports,
  ...execute_exports3,
  ...execute_exports4,
  ...execute_exports5,
  ...execute_exports2
};
var read26 = {
  ...read_exports5,
  ...read_exports6,
  ...read_exports,
  ...read_exports3,
  ...read_exports2,
  ...read_exports4,
  ...read_exports7,
  ...read_exports8,
  ...read_exports9
};
var simulate27 = {
  ...simulate_exports3,
  ...simulate_exports4,
  ...simulate_exports,
  ...simulate_exports2,
  ...simulate_exports5,
  ...simulate_exports6,
  ...simulate_exports7
};
var constants = {
  DelegationManager: constants_exports,
  HybridDeleGator: constants_exports2,
  MultiSigDeleGator: constants_exports3
};
var DelegationFramework = {
  encode: encode28,
  execute: execute15,
  read: read26,
  simulate: simulate27,
  constants,
  utils: utils_exports
};
export {
  DelegationFramework,
  resolveSignatory,
  toMetaMaskSmartAccount
};
//# sourceMappingURL=index.mjs.map